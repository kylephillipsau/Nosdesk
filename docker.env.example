# Docker Compose Environment Configuration
# Copy this file to .env and fill in your values

# Security Configuration
# Generate a secure JWT secret with: openssl rand -base64 32
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production

# JWT token expiration in hours (default: 24)
JWT_EXPIRY_HOURS=24

# MFA Encryption Key for securing TOTP secrets
# Generate with: openssl rand -hex 32
MFA_ENCRYPTION_KEY=your-64-character-hex-encryption-key-change-this-in-production

# Environment
ENVIRONMENT=development

# Server Configuration
PORT=8080
# Host binding - use 127.0.0.1 for local only, 0.0.0.0 for all interfaces
HOST=0.0.0.0

# Rate Limiting Configuration
# Max requests per IP per minute for unauthenticated users
RATE_LIMIT_PER_MINUTE=60
# Rate limiting for authenticated users (higher limit)
AUTH_RATE_LIMIT_PER_MINUTE=600
# Session timeout in minutes (for admin operations)
SESSION_TIMEOUT_MINUTES=30

# File Upload Configuration
# Allowed file upload types (comma-separated)
ALLOWED_FILE_TYPES=pdf,jpg,jpeg,png,gif,webp,txt,doc,docx,xls,xlsx
# Maximum file size in MB
MAX_FILE_SIZE_MB=50

# CORS Configuration
# Frontend URL for CORS
FRONTEND_URL=http://localhost:3000
# Additional allowed origins (comma-separated, optional)
ADDITIONAL_CORS_ORIGINS=

# Logging Configuration
# Set overall log level (error, warn, info, debug, trace)
# Use 'info' for development (less verbose), 'debug' for detailed debugging
RUST_LOG=info

# Microsoft Entra ID Configuration (Optional)
# Leave empty if not using Microsoft authentication
MICROSOFT_CLIENT_ID=
MICROSOFT_TENANT_ID=
MICROSOFT_CLIENT_SECRET=
MICROSOFT_REDIRECT_URI=http://localhost:3000/auth/microsoft/callback

# PostgreSQL Configuration (Optional - uses defaults if not set)
POSTGRES_DB=helpdesk
POSTGRES_USER=nosdesk
POSTGRES_PASSWORD=nosdesk_password

# Database Configuration
DATABASE_URL=postgres://nosdesk:nosdesk_password@postgres:5432/helpdesk
# Database connection pool configuration
DB_MAX_CONNECTIONS=10
DB_MIN_CONNECTIONS=1
DB_CONNECTION_TIMEOUT=30
# Database SSL configuration (set to require for production)
DB_SSL_MODE=prefer

# Redis Configuration (Optional - uses defaults if not set)
REDIS_PASSWORD=nosdesk_redis_password
# Redis URL for distributed rate limiting (optional - fallback to in-memory)
REDIS_URL=redis://:nosdesk_redis_password@redis:6379

# Microsoft Graph Sync Configuration (Optional)
# Concurrent processing and batch sizing
MSGRAPH_CONCURRENT_PROCESSING=5
MSGRAPH_USER_BATCH_SIZE=10

# Skip disabled user accounts during sync (default: true)
# Set to false if you want to sync disabled accounts as well
MSGRAPH_SKIP_DISABLED_ACCOUNTS=true