@import "tailwindcss";

*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
}

/* ============================================
   TAILWIND V4 THEME - Register colors for auto-generation
   ============================================ */
@theme {
  /* Light theme colors (default) */
  --color-app: #f3f4f6;
  --color-surface: #ffffff;
  --color-surface-alt: #f3f4f6;
  --color-surface-hover: #f3f4f6;

  --color-default: #e5e7eb;
  --color-subtle: #f3f4f6;
  --color-strong: #d1d5db;

  --color-primary: #1f2937;
  --color-secondary: #4b5563;
  --color-tertiary: #6b7280;

  /* Accent colors (default orange - can be overridden by branding) */
  --color-accent: #EE9902;
  --color-accent-hover: #d68800;
  --color-accent-muted: rgba(238, 153, 2, 0.18);

  /* Brand colors */
  --color-brand-gold: #FDBD10;
  --color-brand-blue: #2C80FF;
  --color-brand-green: #00C951;
  --color-brand-pink: #FF66B3;
  --color-brand-purple: #8B5CF6;
  --color-brand-gray: #99A1AF;

  /* Status colors */
  --color-status-success: #00C951;
  --color-status-success-muted: rgba(0, 201, 81, 0.15);
  --color-status-error: #EF4444;
  --color-status-error-muted: rgba(239, 68, 68, 0.15);
  --color-status-warning: #F59E0B;
  --color-status-warning-muted: rgba(245, 158, 11, 0.15);
  --color-status-info: #3B82F6;
  --color-status-info-muted: rgba(59, 130, 246, 0.15);

  /* Ticket status colors */
  --color-status-open: #F59E0B;
  --color-status-open-muted: rgba(245, 158, 11, 0.15);
  --color-status-in-progress: #3B82F6;
  --color-status-in-progress-muted: rgba(59, 130, 246, 0.15);
  --color-status-closed: #10B981;
  --color-status-closed-muted: rgba(16, 185, 129, 0.15);

  /* Priority colors */
  --color-priority-high: #EF4444;
  --color-priority-high-muted: rgba(239, 68, 68, 0.15);
  --color-priority-medium: #F59E0B;
  --color-priority-medium-muted: rgba(245, 158, 11, 0.15);
  --color-priority-low: #10B981;
  --color-priority-low-muted: rgba(16, 185, 129, 0.15);
}

/* ============================================
   THEME VARIABLES - Light/Dark switching
   These are the default values that get overwritten
   by the theme system's CSS injector
   ============================================ */
@layer theme {
  :root {
    /* Background layers */
    --color-app: #f3f4f6;
    --color-surface: #ffffff;
    --color-surface-alt: #f3f4f6;
    --color-surface-hover: #e5e7eb;

    /* Borders */
    --color-default: #e5e7eb;
    --color-subtle: #f3f4f6;
    --color-strong: #d1d5db;

    /* Text colors */
    --color-primary: #1f2937;
    --color-secondary: #4b5563;
    --color-tertiary: #6b7280;

    /* Accent colors (default orange - can be overridden by branding) */
    --color-accent: #EE9902;
    --color-accent-hover: #d68800;
    --color-accent-muted: rgba(238, 153, 2, 0.18);

    /* Status colors */
    --color-status-success: #00C951;
    --color-status-success-muted: rgba(0, 201, 81, 0.15);
    --color-status-error: #EF4444;
    --color-status-error-muted: rgba(239, 68, 68, 0.15);
    --color-status-warning: #F59E0B;
    --color-status-warning-muted: rgba(245, 158, 11, 0.15);
    --color-status-info: #3B82F6;
    --color-status-info-muted: rgba(59, 130, 246, 0.15);

    /* Ticket status colors */
    --color-status-open: #F59E0B;
    --color-status-open-muted: rgba(245, 158, 11, 0.15);
    --color-status-in-progress: #3B82F6;
    --color-status-in-progress-muted: rgba(59, 130, 246, 0.15);
    --color-status-closed: #10B981;
    --color-status-closed-muted: rgba(16, 185, 129, 0.15);

    /* Priority colors */
    --color-priority-high: #EF4444;
    --color-priority-high-muted: rgba(239, 68, 68, 0.15);
    --color-priority-medium: #F59E0B;
    --color-priority-medium-muted: rgba(245, 158, 11, 0.15);
    --color-priority-low: #10B981;
    --color-priority-low-muted: rgba(16, 185, 129, 0.15);

    /* Legacy support */
    --color-bg-app: var(--color-app);
    --color-bg-surface: var(--color-surface);
    --color-bg-surface-alt: var(--color-surface-alt);
    --color-bg-surface-hover: var(--color-surface-hover);
    --color-border-default: var(--color-default);
    --color-border-subtle: var(--color-subtle);
    --color-border-strong: var(--color-strong);
    --color-text-primary: var(--color-primary);
    --color-text-secondary: var(--color-secondary);
    --color-text-tertiary: var(--color-tertiary);
    --background-color: var(--color-app);
    --card-background: var(--color-surface);
    --text-primary: var(--color-primary);
    --text-secondary: var(--color-secondary);

    /* Shadows */
    --shadow-inset-dark: rgba(0, 0, 0, 0.1);
    --shadow-inset-light: rgba(255, 255, 255, 0.7);
    --shadow-outer-dark: rgba(0, 0, 0, 0.1);
    --shadow-outer-light: rgba(255, 255, 255, 0.7);
  }

  /* Dark theme overrides - these are defaults before theme injection */
  .dark {
    /* Background layers */
    --color-app: #0f172a;
    --color-surface: #1e293b;
    --color-surface-alt: #334155;
    --color-surface-hover: rgba(51, 65, 85, 0.5);

    /* Borders - subtle in dark mode */
    --color-default: #334155;
    --color-subtle: #293548;
    --color-strong: #475569;

    /* Text colors */
    --color-primary: #f9fafb;
    --color-secondary: #cbd5e1;
    --color-tertiary: #94a3b8;

    /* Accent colors (default orange - can be overridden by branding) */
    --color-accent: #EE9902;
    --color-accent-hover: #ffaa22;
    --color-accent-muted: rgba(238, 153, 2, 0.22);

    /* Status colors - brighter for dark mode */
    --color-status-success: #00C951;
    --color-status-success-muted: rgba(0, 201, 81, 0.2);
    --color-status-error: #EF4444;
    --color-status-error-muted: rgba(239, 68, 68, 0.2);
    --color-status-warning: #F59E0B;
    --color-status-warning-muted: rgba(245, 158, 11, 0.2);
    --color-status-info: #3B82F6;
    --color-status-info-muted: rgba(59, 130, 246, 0.2);

    /* Ticket status colors - brighter for dark mode */
    --color-status-open: #FBBF24;
    --color-status-open-muted: rgba(251, 191, 36, 0.2);
    --color-status-in-progress: #60A5FA;
    --color-status-in-progress-muted: rgba(96, 165, 250, 0.2);
    --color-status-closed: #34D399;
    --color-status-closed-muted: rgba(52, 211, 153, 0.2);

    /* Priority colors - brighter for dark mode */
    --color-priority-high: #F87171;
    --color-priority-high-muted: rgba(248, 113, 113, 0.2);
    --color-priority-medium: #FBBF24;
    --color-priority-medium-muted: rgba(251, 191, 36, 0.2);
    --color-priority-low: #34D399;
    --color-priority-low-muted: rgba(52, 211, 153, 0.2);

    /* Shadows */
    --shadow-inset-dark: rgba(0, 0, 0, 0.3);
    --shadow-inset-light: rgba(255, 255, 255, 0.1);
    --shadow-outer-dark: rgba(0, 0, 0, 0.3);
    --shadow-outer-light: rgba(255, 255, 255, 0.1);
  }
}

/* Smooth transitions between themes */
:root,
.dark {
  transition: background-color 0.3s ease-in-out, color 0.3s ease-in-out;
}

/* ============================================
   CUSTOM UTILITIES - Tailwind v4
   Define custom utility classes using @layer
   ============================================ */
@layer utilities {
  /* Background color utilities */
  .bg-app { background-color: var(--color-app); }
  .bg-surface { background-color: var(--color-surface); }
  .bg-surface-alt { background-color: var(--color-surface-alt); }
  .bg-surface-hover { background-color: var(--color-surface-hover); }

  /* Border color utilities */
  .border-default { border-color: var(--color-default); }
  .border-subtle { border-color: var(--color-subtle); }
  .border-strong { border-color: var(--color-strong); }

  /* Text color utilities */
  .text-primary { color: var(--color-primary); }
  .text-secondary { color: var(--color-secondary); }
  .text-tertiary { color: var(--color-tertiary); }

  /* Accent color utilities */
  .bg-accent { background-color: var(--color-accent); }
  .text-accent { color: var(--color-accent); }
  .border-accent { border-color: var(--color-accent); }
  .bg-accent-hover { background-color: var(--color-accent-hover); }
  .bg-accent-muted { background-color: var(--color-accent-muted); }
  .focus\:ring-accent:focus { --tw-ring-color: var(--color-accent); }

  /* Brand color utilities */
  .bg-brand-blue { background-color: var(--color-brand-blue); }
  .text-brand-blue { color: var(--color-brand-blue); }
  .bg-brand-gold { background-color: var(--color-brand-gold); }
  .text-brand-gold { color: var(--color-brand-gold); }
  .bg-brand-green { background-color: var(--color-brand-green); }
  .text-brand-green { color: var(--color-brand-green); }

  /* Status color utilities */
  .bg-status-success { background-color: var(--color-status-success); }
  .text-status-success { color: var(--color-status-success); }
  .border-status-success { border-color: var(--color-status-success); }
  .bg-status-success-muted { background-color: var(--color-status-success-muted); }

  .bg-status-error { background-color: var(--color-status-error); }
  .text-status-error { color: var(--color-status-error); }
  .border-status-error { border-color: var(--color-status-error); }
  .bg-status-error-muted { background-color: var(--color-status-error-muted); }

  .bg-status-warning { background-color: var(--color-status-warning); }
  .text-status-warning { color: var(--color-status-warning); }
  .border-status-warning { border-color: var(--color-status-warning); }
  .bg-status-warning-muted { background-color: var(--color-status-warning-muted); }

  .bg-status-info { background-color: var(--color-status-info); }
  .text-status-info { color: var(--color-status-info); }
  .border-status-info { border-color: var(--color-status-info); }
  .bg-status-info-muted { background-color: var(--color-status-info-muted); }

  /* Ticket status utilities */
  .bg-status-open { background-color: var(--color-status-open); }
  .text-status-open { color: var(--color-status-open); }
  .border-status-open { border-color: var(--color-status-open); }
  .bg-status-open-muted { background-color: var(--color-status-open-muted); }

  .bg-status-in-progress { background-color: var(--color-status-in-progress); }
  .text-status-in-progress { color: var(--color-status-in-progress); }
  .border-status-in-progress { border-color: var(--color-status-in-progress); }
  .bg-status-in-progress-muted { background-color: var(--color-status-in-progress-muted); }

  .bg-status-closed { background-color: var(--color-status-closed); }
  .text-status-closed { color: var(--color-status-closed); }
  .border-status-closed { border-color: var(--color-status-closed); }
  .bg-status-closed-muted { background-color: var(--color-status-closed-muted); }

  /* Priority utilities */
  .bg-priority-high { background-color: var(--color-priority-high); }
  .text-priority-high { color: var(--color-priority-high); }
  .border-priority-high { border-color: var(--color-priority-high); }
  .bg-priority-high-muted { background-color: var(--color-priority-high-muted); }

  .bg-priority-medium { background-color: var(--color-priority-medium); }
  .text-priority-medium { color: var(--color-priority-medium); }
  .border-priority-medium { border-color: var(--color-priority-medium); }
  .bg-priority-medium-muted { background-color: var(--color-priority-medium-muted); }

  .bg-priority-low { background-color: var(--color-priority-low); }
  .text-priority-low { color: var(--color-priority-low); }
  .border-priority-low { border-color: var(--color-priority-low); }
  .bg-priority-low-muted { background-color: var(--color-priority-low-muted); }

  /* Scrollbar hide utility */
  .scrollbar-hide {
    scrollbar-width: none; /* Firefox */
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none; /* Safari and Chrome */
  }
}

html, body {
  height: 100%;
  overflow: hidden;
}

body {
  background-color: var(--background-color);
  color: var(--text-primary);
}

#app {
  height: 100%;
  font-weight: normal;
}

a {
  text-decoration: none;
}

/* ============================================
   LIST STAGGER ANIMATIONS
   Used by list views for staggered fade-in effects
   ============================================ */
.list-stagger-enter-active {
  transition: opacity var(--animation-duration, 150ms) ease-out,
              transform var(--animation-duration, 150ms) ease-out;
  transition-delay: var(--stagger-delay, 0ms);
}

.list-stagger-enter-from {
  opacity: 0;
  transform: translateY(-4px);
}

.list-stagger-leave-active {
  transition: opacity 100ms ease-in;
}

.list-stagger-leave-to {
  opacity: 0;
}

.list-stagger-move {
  transition: transform 150ms ease-out;
}

/* ============================================
   THEME-SPECIFIC AVATAR EFFECTS (Easter Eggs)
   ============================================ */

/* E-Paper Theme: Dithering effect on avatars and profile banners */
[data-theme="epaper"] .avatar-themed {
  filter: grayscale(1) contrast(1.3);
  position: relative;
}

/* E-Paper: Override avatar fallback backgrounds to white/light gray */
[data-theme="epaper"] .avatar-themed > div:first-child {
  background-color: #e8e8e8 !important;
  color: #1a1a1a !important;
}

[data-theme="epaper"] .profile-banner {
  filter: grayscale(1) contrast(1.2);
  position: relative;
}

/* Dithering overlay using CSS pattern */
[data-theme="epaper"] .avatar-themed::after {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 4 4' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='0' y='0' width='1' height='1' fill='%23000' fill-opacity='0.15'/%3E%3Crect x='2' y='2' width='1' height='1' fill='%23000' fill-opacity='0.15'/%3E%3C/svg%3E");
  background-size: 3px 3px;
  mix-blend-mode: multiply;
  border-radius: inherit;
}

[data-theme="epaper"] .profile-banner::after {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 4 4' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='0' y='0' width='1' height='1' fill='%23000' fill-opacity='0.12'/%3E%3Crect x='2' y='2' width='1' height='1' fill='%23000' fill-opacity='0.12'/%3E%3C/svg%3E");
  background-size: 3px 3px;
  mix-blend-mode: multiply;
  z-index: 1;
}

/* Red Horizon Theme: Deep red/black CRT plasma display effect */
[data-theme="red-horizon"] .avatar-themed {
  position: relative;
}

/* Red Horizon: Override avatar fallback backgrounds to deep blood red */
[data-theme="red-horizon"] .avatar-themed > div:first-child {
  background-color: #2a0000 !important;
  color: #ff0000 !important;
}

[data-theme="red-horizon"] .profile-banner {
  position: relative;
}

/* Fully saturated red filter - strip all other colors */
[data-theme="red-horizon"] .avatar-themed img,
[data-theme="red-horizon"] .avatar-themed > div:first-child {
  filter: grayscale(1) sepia(1) saturate(5) hue-rotate(-50deg) brightness(0.6) contrast(1.4);
}

[data-theme="red-horizon"] .profile-banner {
  filter: grayscale(1) sepia(1) saturate(5) hue-rotate(-50deg) brightness(0.5) contrast(1.3);
}

/* Scanline overlay for avatars - dark red scanlines */
[data-theme="red-horizon"] .avatar-themed::before {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 1px,
    rgba(0, 0, 0, 0.4) 1px,
    rgba(0, 0, 0, 0.4) 2px
  );
  z-index: 1;
  border-radius: inherit;
}

/* Scanline overlay for profile banner - dark red scanlines */
[data-theme="red-horizon"] .profile-banner::before {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(0, 0, 0, 0.3) 2px,
    rgba(0, 0, 0, 0.3) 4px
  );
  z-index: 1;
}

/* Deep red phosphor glow for avatars */
[data-theme="red-horizon"] .avatar-themed::after {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  box-shadow: inset 0 0 25px rgba(180, 0, 0, 0.6);
  z-index: 2;
  border-radius: inherit;
}

/* Deep red phosphor glow for profile banner */
[data-theme="red-horizon"] .profile-banner::after {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  box-shadow: inset 0 0 50px rgba(150, 0, 0, 0.5);
  z-index: 2;
}

/* ============================================
   THEME-SPECIFIC ERROR PAGE EFFECTS
   ============================================ */

/* E-Paper Theme: Static error page - no animation */
[data-theme="epaper"] .error-svg {
  animation: none !important;
}

[data-theme="epaper"] .error-svg:hover {
  transform: none !important;
}

[data-theme="epaper"] .error-text {
  fill: #1a1a1a !important;
  filter: none !important;
}

/* Red Horizon Theme: Deep saturated red error page */
[data-theme="red-horizon"] .error-text {
  fill: #ff0000 !important;
}

/* Red Horizon: Scanlines over the error page - between SVG and text */
[data-theme="red-horizon"] .error-page-container {
  position: relative;
}

[data-theme="red-horizon"] .error-page-container::before {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(0, 0, 0, 0.25) 2px,
    rgba(0, 0, 0, 0.25) 4px
  );
  z-index: 1;
}

/* Red Horizon: Deep red glow on error SVG (behind scanlines) */
[data-theme="red-horizon"] .error-svg {
  position: relative;
  z-index: 0;
  filter: drop-shadow(0 0 15px rgba(255, 0, 0, 0.7)) drop-shadow(0 0 30px rgba(150, 0, 0, 0.5));
}

/* Red Horizon: Text and buttons sit above scanlines */
[data-theme="red-horizon"] .error-page-container > div > .flex {
  position: relative;
  z-index: 2;
}

/* Red Horizon: Subtle CRT glow for sidebar logo
   Exponential falloff layers - restrained for legibility
*/
[data-theme="red-horizon"] .sidebar-logo {
  position: relative;
  filter:
    drop-shadow(0 0 1px rgba(200, 0, 0, 0.6))
    drop-shadow(0 0 3px rgba(180, 0, 0, 0.3))
    drop-shadow(0 0 8px rgba(150, 0, 0, 0.15))
    drop-shadow(0 0 16px rgba(120, 0, 0, 0.08));
  animation: red-horizon-logo-pulse 4s ease-in-out infinite;
}

/* Subtle scanlines overlay */
[data-theme="red-horizon"] .sidebar-logo::after {
  content: '';
  position: absolute;
  inset: -4px;
  background: repeating-linear-gradient(
    0deg,
    transparent 0px,
    transparent 2px,
    rgba(0, 0, 0, 0.08) 2px,
    rgba(0, 0, 0, 0.08) 3px
  );
  pointer-events: none;
  border-radius: 4px;
}

@keyframes red-horizon-logo-pulse {
  0%, 100% {
    filter:
      drop-shadow(0 0 1px rgba(200, 0, 0, 0.6))
      drop-shadow(0 0 3px rgba(180, 0, 0, 0.3))
      drop-shadow(0 0 8px rgba(150, 0, 0, 0.15))
      drop-shadow(0 0 16px rgba(120, 0, 0, 0.08));
  }
  50% {
    filter:
      drop-shadow(0 0 1px rgba(220, 0, 0, 0.7))
      drop-shadow(0 0 4px rgba(200, 0, 0, 0.35))
      drop-shadow(0 0 10px rgba(170, 0, 0, 0.18))
      drop-shadow(0 0 20px rgba(140, 0, 0, 0.1));
  }
}

/* Red Horizon: Button styling - red text on dark with glow */
[data-theme="red-horizon"] .bg-accent {
  background-color: #1a0404 !important;
  border: 1px solid #660000 !important;
  box-shadow: 0 0 8px rgba(200, 0, 0, 0.4), inset 0 0 20px rgba(100, 0, 0, 0.2);
}

[data-theme="red-horizon"] .bg-accent.text-white,
[data-theme="red-horizon"] .bg-accent .text-white {
  color: #ff2a2a !important;
  text-shadow: 0 0 6px rgba(255, 0, 0, 0.6);
}

[data-theme="red-horizon"] .bg-accent:hover {
  background-color: #2a0808 !important;
  border-color: #880000 !important;
  box-shadow: 0 0 12px rgba(255, 0, 0, 0.5), inset 0 0 25px rgba(120, 0, 0, 0.3);
}

/* Red Horizon: Secondary/outline buttons */
[data-theme="red-horizon"] .border-accent {
  border-color: #660000 !important;
}

[data-theme="red-horizon"] .text-accent {
  text-shadow: 0 0 4px rgba(200, 0, 0, 0.4);
}

/* Red Horizon: Danger/delete buttons - brighter red glow */
[data-theme="red-horizon"] .bg-status-error,
[data-theme="red-horizon"] .bg-red-600,
[data-theme="red-horizon"] .bg-red-500 {
  background-color: #2a0000 !important;
  border: 1px solid #880000 !important;
  box-shadow: 0 0 10px rgba(255, 0, 0, 0.5), inset 0 0 15px rgba(150, 0, 0, 0.3);
}

[data-theme="red-horizon"] .bg-status-error:hover,
[data-theme="red-horizon"] .bg-red-600:hover,
[data-theme="red-horizon"] .bg-red-500:hover {
  background-color: #3a0000 !important;
  box-shadow: 0 0 15px rgba(255, 0, 0, 0.7), inset 0 0 20px rgba(180, 0, 0, 0.4);
}
